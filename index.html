<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Jeu avec image et personnage</title>
</head>
<body onload="startGame()">

<script>
let myGameArea;
let myGamePiece;
let background;
var myObstacle;

function startGame() {
  // Création de la zone de jeu
  myGameArea = {
    canvas: document.createElement("canvas"),
    start: function() {
      this.canvas.width = 1500;
      this.canvas.height = 500;
      this.context = this.canvas.getContext("2d");
      document.body.insertBefore(this.canvas, document.body.childNodes[0]);
      this.interval = setInterval(updateGameArea, 20); // rafraîchit 50x/s
    },
    clear: function() {
      this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
    }
  };

  myGameArea.start();

  // Chargement du fond
  background = new Image();
  background.src = "11.jpg"; // ton image de fond

  // Création du personnage
  myGamePiece = new component(100, 100, "22.png", 50, 300, "image");
  myObstacle = new component(40, 40, "green", 300, 120);
}

// Classe composant (pour image ou couleur)
function component(width, height, colorOrImage, x, y, type) {
  this.width = width;
  this.height = height;
  this.x = x;
  this.y = y;
  this.speedX = 0;
  this.speedY = 0;
  this.type = type;

  if (this.type === "image") {
    this.image = new Image();
    this.image.src = colorOrImage;
  } else {
    this.color = colorOrImage;
  }

  this.update = function() {
    const ctx = myGameArea.context;
    if (this.type === "image") {
      ctx.drawImage(this.image, this.x, this.y, this.width, this.height);
    } else {
      ctx.fillStyle = this.color;
      ctx.fillRect(this.x, this.y, this.width, this.height);
    }
  };

  this.newPos = function() {
    this.x += this.speedX;
    this.y += this.speedY;
  };
}

// Met à jour le canvas
function updateGameArea() {
  const ctx = myGameArea.context;
  ctx.drawImage(background, 0, 0, myGameArea.canvas.width, myGameArea.canvas.height);
  myGamePiece.newPos();
  myGamePiece.update();
  myObstacle.update();
}

// Fonctions de mouvement
function moveup() {
  myGamePiece.speedY = -2;
}

function movedown() {
  myGamePiece.speedY = 2;
}

function moveright() {
  myGamePiece.speedX = 2;
}

function moveleft() {
  myGamePiece.speedX = -2;
}

// Arrêter le mouvement
function clearmove() {
  myGamePiece.speedX = 0;
  myGamePiece.speedY = 0;
}




</script>

<!-- Contrôles -->
<button onmousedown="moveup()" onmouseup="clearmove()">UP</button>
<button onmousedown="movedown()" onmouseup="clearmove()">DOWN</button>
<button onmousedown="moveleft()" onmouseup="clearmove()">LEFT</button>
<button onmousedown="moveright()" onmouseup="clearmove()">RIGHT</button>

</body>
</html>
